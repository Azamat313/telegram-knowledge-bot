import os
from dotenv import load_dotenv

load_dotenv()

# Telegram
BOT_TOKEN = os.getenv("BOT_TOKEN", "")
USTAZ_BOT_TOKEN = os.getenv("USTAZ_BOT_TOKEN", "")
MODERATOR_BOT_TOKEN = os.getenv("MODERATOR_BOT_TOKEN", "")
ADMIN_IDS = [int(x.strip()) for x in os.getenv("ADMIN_IDS", "").split(",") if x.strip()]

# OpenAI ChatGPT
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY", "")
OPENAI_MODEL = os.getenv("OPENAI_MODEL", "gpt-4o-mini")

# Paths
DATABASE_PATH = os.getenv("DATABASE_PATH", "./database/bot.db")
CHROMA_PATH = os.getenv("CHROMA_PATH", "./chroma_db")
LOG_PATH = os.getenv("LOG_PATH", "./logs/bot.log")
KNOWLEDGE_DIR = os.getenv("KNOWLEDGE_DIR", "./knowledge")

# Cache (ChromaDB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∫—ç—à –¥–ª—è –ò–ò-–æ—Ç–≤–µ—Ç–æ–≤)
CACHE_THRESHOLD = float(os.getenv("CACHE_THRESHOLD", "0.90"))
EMBEDDING_MODEL = os.getenv("EMBEDDING_MODEL", "paraphrase-multilingual-MiniLM-L12-v2")

# Legacy (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
SIMILARITY_THRESHOLD = CACHE_THRESHOLD

# Subscription
FREE_ANSWERS_LIMIT = int(os.getenv("FREE_ANSWERS_LIMIT", "5"))
WARNING_AT = int(os.getenv("WARNING_AT", "3"))
RATE_LIMIT_PER_MINUTE = int(os.getenv("RATE_LIMIT_PER_MINUTE", "5"))

# Conversation History
CONVERSATION_HISTORY_LIMIT = int(os.getenv("CONVERSATION_HISTORY_LIMIT", "50"))

# Ustaz Consultations
USTAZ_MONTHLY_LIMIT = int(os.getenv("USTAZ_MONTHLY_LIMIT", "5"))

# Web Admin Panel (Basic Auth)
WEB_ADMIN_USER = os.getenv("WEB_ADMIN_USER", "admin")
WEB_ADMIN_PASSWORD = os.getenv("WEB_ADMIN_PASSWORD", "")

# Domain
DOMAIN = os.getenv("DOMAIN", "")

SUBSCRIPTION_PLANS = {
    "monthly": {"price": 50, "currency": "XTR", "days": 30, "label": "–ê–π–ª—ã“õ –∂–∞–∑—ã–ª—ã–º (30 –∫“Ø–Ω)"},
    "yearly": {"price": 500, "currency": "XTR", "days": 365, "label": "–ñ—ã–ª–¥—ã“õ –∂–∞–∑—ã–ª—ã–º (365 –∫“Ø–Ω)"},
}

# Messages
MSG_WELCOME = (
    "–ê—Å—Å–∞–ª–∞—É–º–∞“ì–∞–ª–µ–π–∫—É–º! –ú–µ–Ω ‚Äî –†–∞–º–∞–∑–∞–Ω –∞–π—ã–Ω–∞ “õ–∞—Ç—ã—Å—Ç—ã —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –∂–∞—É–∞–ø –±–µ—Ä–µ—Ç—ñ–Ω –ò–ò –±–æ—Ç-–∫”©–º–µ–∫—à—ñ–º—ñ–Ω.\n\n"
    "–ú–∞“ì–∞–Ω –æ—Ä–∞–∑–∞, –∑–µ–∫–µ—Ç, —Å–∞–¥–∞“õ–∞, —Ç–∞—Ä–∞—É–∏—Ö, –ø—ñ—Ç—ñ—Ä –∂”ô–Ω–µ —Ç.–±. —Ç–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä –±–æ–π—ã–Ω—à–∞ —Å“±—Ä–∞“õ “õ–æ–π—ã“£—ã–∑.\n"
    "–ú–µ–Ω “õ–∞–∑–∞“õ –∂”ô–Ω–µ –æ—Ä—ã—Å —Ç—ñ–ª–¥–µ—Ä—ñ–Ω (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –∂”ô–Ω–µ –ª–∞—Ç–∏–Ω–∏—Ü–∞) —Ç“Ø—Å—ñ–Ω–µ–º—ñ–Ω.\n\n"
    "–ê–ª“ì–∞—à“õ—ã 5 –∂–∞—É–∞–ø ‚Äî —Ç–µ–≥—ñ–Ω!\n\n"
    "–ö–æ–º–∞–Ω–¥–∞–ª–∞—Ä:\n"
    "/help ‚Äî –∞–Ω—ã“õ—Ç–∞–º–∞\n"
    "/stats ‚Äî —Å—ñ–∑–¥—ñ“£ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞“£—ã–∑"
)

MSG_HELP = (
    "–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã–ø –∂—ñ–±–µ—Ä—ñ“£—ñ–∑, –º–µ–Ω –±–∞–∑–∞–¥–∞–Ω –∂–∞—É–∞–ø —ñ–∑–¥–µ–π–º—ñ–Ω.\n\n"
    "–ú–µ–Ω “õ–∞–∑–∞“õ —Ç—ñ–ª—ñ–Ω (–∫–∏—Ä–∏–ª–ª–∏—Ü–∞ –∂”ô–Ω–µ –ª–∞—Ç–∏–Ω–∏—Ü–∞) –∂”ô–Ω–µ –æ—Ä—ã—Å —Ç—ñ–ª—ñ–Ω —Ç“Ø—Å—ñ–Ω–µ–º—ñ–Ω. "
    "“ö–∞—Ç–µ –∂–∞–∑—Å–∞“£—ã–∑ –¥–∞ —Ç“Ø—Å—ñ–Ω–µ–º—ñ–Ω.\n\n"
    "–¢–∞“õ—ã—Ä—ã–ø—Ç–∞—Ä: –æ—Ä–∞–∑–∞, –Ω–∏–µ—Ç, —Å”ô—Ä–µ—Å—ñ, –∞—É—ã–∑–∞—à–∞—Ä, —Ç–∞—Ä–∞—É–∏—Ö, “õ–∞–¥—ñ—Ä —Ç“Ø–Ω—ñ, "
    "–∑–µ–∫–µ—Ç, –ø—ñ—Ç—ñ—Ä —Å–∞–¥–∞“õ–∞, –∏“ì—Ç–∏–∫–∞—Ñ –∂”ô–Ω–µ —Ç.–±.\n\n"
    "–ö–æ–º–∞–Ω–¥–∞–ª–∞—Ä:\n"
    "/start ‚Äî –±–∞—Å—Ç–∞—É\n"
    "/help ‚Äî –∞–Ω—ã“õ—Ç–∞–º–∞\n"
    "/stats ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (“õ–∞–Ω—à–∞ –∂–∞—É–∞–ø –ø–∞–π–¥–∞–ª–∞–Ω—ã–ª–¥—ã, –∂–∞–∑—ã–ª—ã–º)\n"
    "/clear ‚Äî –¥–∏–∞–ª–æ–≥ —Ç–∞—Ä–∏—Ö—ã–Ω —Ç–∞–∑–∞–ª–∞—É"
)

MSG_NOT_FOUND = "–ö–µ—à—ñ—Ä—ñ“£—ñ–∑, —Å—ñ–∑–¥—ñ“£ —Å“±—Ä–∞“ì—ã“£—ã–∑“ì–∞ –∂–∞—É–∞–ø —Ç–∞–±–∞ –∞–ª–º–∞–¥—ã–º. –ë“±–ª —Ç–∞“õ—ã—Ä—ã–ø –±–∞–∑–∞–º—ã–∑–¥–∞ –∂–æ“õ –±–æ–ª—É—ã –º“Ø–º–∫—ñ–Ω. –°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –±–∞—Å“õ–∞—à–∞ “õ–æ–π—ã–ø –∫”©—Ä—ñ“£—ñ–∑."

MSG_AI_ERROR = "–ö–µ—à—ñ—Ä—ñ“£—ñ–∑, –ò–ò —Å–µ—Ä–≤–∏—Å—ñ–Ω–¥–µ —É–∞“õ—ã—Ç—à–∞ “õ–∞—Ç–µ –æ—Ä—ã–Ω –∞–ª–¥—ã. –°”ô–ª –∫“Ø—Ç—ñ–ø, “õ–∞–π—Ç–∞–ª–∞–ø –∫”©—Ä—ñ“£—ñ–∑."

MSG_LIMIT_REACHED = (
    "–°—ñ–∑ {limit} —Ç–µ–≥—ñ–Ω –∂–∞—É–∞–ø—Ç—ã“£ –±–∞—Ä–ª—ã“ì—ã–Ω –ø–∞–π–¥–∞–ª–∞–Ω–¥—ã“£—ã–∑.\n\n"
    "–ñ–∞–ª“ì–∞—Å—Ç—ã—Ä—É “Ø—à—ñ–Ω –∂–∞–∑—ã–ª—ã–º–¥—ã —Ä”ô—Å—ñ–º–¥–µ“£—ñ–∑:"
)

MSG_WARNING = "–ù–∞–∑–∞—Ä –∞—É–¥–∞—Ä—ã“£—ã–∑! –°—ñ–∑–¥–µ {limit} —Ç–µ–≥—ñ–Ω –∂–∞—É–∞–ø—Ç–∞–Ω {remaining} “õ–∞–ª–¥—ã."

MSG_NON_TEXT = "–ú–µ–Ω —Ç–µ–∫ –º”ô—Ç—ñ–Ω–¥—ñ–∫ —Ö–∞–±–∞—Ä–ª–∞–º–∞–ª–∞—Ä–¥—ã “õ–∞–±—ã–ª–¥–∞–π–º—ã–Ω. –°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –º”ô—Ç—ñ–Ω–º–µ–Ω –∂–∞–∑—ã“£—ã–∑."

MSG_RATE_LIMIT = "–°“±—Ä–∞–Ω—ã—Å—Ç–∞—Ä —Ç—ã–º –∫”©–ø. –°”ô–ª –∫“Ø—Ç—ñ–ø, “õ–∞–π—Ç–∞ –∫”©—Ä—ñ“£—ñ–∑."

MSG_SUBSCRIPTION_ACTIVE = "–ñ–∞–∑—ã–ª—ã–º {expires_at} –¥–µ–π—ñ–Ω –±–µ–ª—Å–µ–Ω–¥—ñ—Ä—ñ–ª–¥—ñ. –ñ–∞“õ—Å—ã –ø–∞–π–¥–∞–ª–∞–Ω—É —Ç—ñ–ª–µ–π–º—ñ–∑!"

MSG_ADMIN_ONLY = "–ë“±–ª –∫–æ–º–∞–Ω–¥–∞ —Ç–µ–∫ ”ô–∫—ñ–º—à—ñ–ª–µ—Ä–≥–µ “õ–æ–ª –∂–µ—Ç—ñ–º–¥—ñ."

MSG_HISTORY_CLEARED = "–î–∏–∞–ª–æ–≥ —Ç–∞—Ä–∏—Ö—ã —Ç–∞–∑–∞–ª–∞–Ω–¥—ã. –ñ–∞“£–∞ —Å“±—Ö–±–∞—Ç –±–∞—Å—Ç–∞—É“ì–∞ –±–æ–ª–∞–¥—ã."

MSG_TERMS = (
    "üìú –ü–∞–π–¥–∞–ª–∞–Ω—É —à–∞—Ä—Ç—Ç–∞—Ä—ã:\n\n"
    "1. –ë–æ—Ç –†–∞–º–∞–∑–∞–Ω –∞–π—ã–Ω–∞ “õ–∞—Ç—ã—Å—Ç—ã —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –ò–ò –∞—Ä“õ—ã–ª—ã –∂–∞—É–∞–ø –±–µ—Ä–µ–¥—ñ.\n"
    "2. –ñ–∞–∑—ã–ª—ã–º Telegram Stars –∞—Ä“õ—ã–ª—ã —Ä”ô—Å—ñ–º–¥–µ–ª–µ–¥—ñ.\n"
    "3. –ñ–∞–∑—ã–ª—ã–º –º–µ—Ä–∑—ñ–º—ñ –∞—è“õ—Ç–∞–ª“ì–∞–Ω—à–∞ –±–µ–ª—Å–µ–Ω–¥—ñ –±–æ–ª–∞–¥—ã.\n"
    "4. –ñ–∞–∑—ã–ª—ã–º –∞“õ—à–∞—Å—ã “õ–∞–π—Ç–∞—Ä—ã–ª–º–∞–π–¥—ã (—Ä–µ—Ñ–∞–Ω–¥ –∂–æ“õ), –µ—Ä–µ–∫—à–µ –∂–∞“ì–¥–∞–π–ª–∞—Ä–¥–∞ ”ô–∫—ñ–º—à—ñ–≥–µ —Ö–∞–±–∞—Ä–ª–∞—Å—ã“£—ã–∑.\n"
    "5. –ë–æ—Ç –¥—ñ–Ω–∏ –∫–µ“£–µ—Å –±–µ—Ä–º–µ–π–¥—ñ ‚Äî —Ç–µ–∫ –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã“õ –º–∞“õ—Å–∞—Ç—Ç–∞.\n"
)

MSG_PAYSUPPORT = (
    "üí≥ –¢”©–ª–µ–º –±–æ–π—ã–Ω—à–∞ —Å“±—Ä–∞“õ—Ç–∞—Ä:\n\n"
    "–¢”©–ª–µ–º Telegram Stars –∞—Ä“õ—ã–ª—ã –∂“Ø–∑–µ–≥–µ –∞—Å—ã—Ä—ã–ª–∞–¥—ã.\n"
    "Stars —Å–∞—Ç—ã–ø –∞–ª—É: Telegram Settings ‚Üí Telegram Stars.\n\n"
    "–ú”ô—Å–µ–ª–µ —Ç—É—ã–Ω–¥–∞—Å–∞ ”ô–∫—ñ–º—à—ñ–≥–µ –∂–∞–∑—ã“£—ã–∑: @admin"
)

MSG_PAYMENT_SUCCESS = (
    "‚úÖ –ñ–∞–∑—ã–ª—ã–º —Å”ô—Ç—Ç—ñ —Ä”ô—Å—ñ–º–¥–µ–ª–¥—ñ!\n\n"
    "–¢–∞—Ä–∏—Ñ: {plan_label}\n"
    "–ú–µ—Ä–∑—ñ–º—ñ: {expires_at} –¥–µ–π—ñ–Ω\n\n"
    "–ñ–∞“õ—Å—ã –ø–∞–π–¥–∞–ª–∞–Ω—É —Ç—ñ–ª–µ–π–º—ñ–∑!"
)

MSG_PAYMENT_TITLE = "–†–∞–º–∞–∑–∞–Ω –ò–ò –±–æ—Ç ‚Äî –∂–∞–∑—ã–ª—ã–º"
MSG_PAYMENT_DESCRIPTION = "–®–µ–∫—Å—ñ–∑ –∂–∞—É–∞–ø—Ç–∞—Ä + —É—Å—Ç–∞–∑“ì–∞ —Å“±—Ä–∞“õ “õ–æ—é –º“Ø–º–∫—ñ–Ω–¥—ñ–≥—ñ"

# Ustaz consultation messages
MSG_ASK_USTAZ_BUTTON = "–£—Å—Ç–∞–∑“ì–∞ —Å“±—Ä–∞“õ “õ–æ—é"
MSG_ASK_USTAZ_CONFIRM = (
    "–°—ñ–∑ —É—Å—Ç–∞–∑“ì–∞ —Å“±—Ä–∞“õ “õ–æ–π“ì—ã“£—ã–∑ –∫–µ–ª–µ –º–µ?\n\n"
    "–ê–π —Å–∞–π—ã–Ω {limit} —Ä–µ—Ç —Å“±—Ä–∞“õ “õ–æ—é“ì–∞ –±–æ–ª–∞–¥—ã.\n"
    "–°—ñ–∑–¥–µ {remaining} –º“Ø–º–∫—ñ–Ω–¥—ñ–∫ “õ–∞–ª–¥—ã.\n\n"
    "–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑:"
)
MSG_ASK_USTAZ_LIMIT = (
    "–ö–µ—à—ñ—Ä—ñ“£—ñ–∑, —Å—ñ–∑ –±“±–ª –∞–π–¥–∞ —É—Å—Ç–∞–∑“ì–∞ {limit} —Ä–µ—Ç —Å“±—Ä–∞“õ “õ–æ–π–¥—ã“£—ã–∑.\n"
    "–ö–µ–ª–µ—Å—ñ –∞–π–¥–∞ “õ–∞–π—Ç–∞ —Å“±—Ä–∞–π –∞–ª–∞—Å—ã–∑."
)
MSG_ASK_USTAZ_SENT = (
    "–°“±—Ä–∞“ì—ã“£—ã–∑ —É—Å—Ç–∞–∑“ì–∞ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ! –ñ–∞—É–∞–ø –∫–µ–ª–≥–µ–Ω–¥–µ —Ö–∞–±–∞—Ä–ª–∞–π–º—ã–∑."
)
MSG_ASK_USTAZ_SUBSCRIBERS_ONLY = (
    "–£—Å—Ç–∞–∑“ì–∞ —Å“±—Ä–∞“õ “õ–æ—é —Ç–µ–∫ –∂–∞–∑—ã–ª—ã–º—à—ã–ª–∞—Ä“ì–∞ “õ–æ–ª –∂–µ—Ç—ñ–º–¥—ñ.\n"
    "–ñ–∞–∑—ã–ª—ã–º —Ä”ô—Å—ñ–º–¥–µ—É “Ø—à—ñ–Ω /start –∫–æ–º–∞–Ω–¥–∞—Å—ã–Ω –∂—ñ–±–µ—Ä—ñ“£—ñ–∑."
)
MSG_CONSULTATION_ANSWER = (
    "–£—Å—Ç–∞–∑–¥–∞–Ω –∂–∞—É–∞–ø –∫–µ–ª–¥—ñ!\n\n"
    "–°—ñ–∑–¥—ñ“£ —Å“±—Ä–∞“ì—ã“£—ã–∑:\n{question}\n\n"
    "–£—Å—Ç–∞–∑–¥—ã“£ –∂–∞—É–∞–±—ã:\n{answer}"
)
MSG_ASK_USTAZ_WRITE_QUESTION = "–£—Å—Ç–∞–∑“ì–∞ —Å“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑:"
MSG_ASK_USTAZ_CANCEL = "–°“±—Ä–∞“õ –∂—ñ–±–µ—Ä—É —Ç–æ“õ—Ç–∞—Ç—ã–ª–¥—ã."

# Ustaz bot messages
MSG_USTAZ_WELCOME = (
    "–ê—Å—Å–∞–ª–∞—É–º–∞“ì–∞–ª–µ–π–∫—É–º, —É—Å—Ç–∞–∑!\n\n"
    "–ë“±–ª ‚Äî –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è –ø–∞–Ω–µ–ª—ñ. –ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã–ª–∞—Ä —Å“±—Ä–∞“õ—Ç–∞—Ä—ã–Ω–∞ –∂–∞—É–∞–ø –±–µ—Ä—É–≥–µ –±–æ–ª–∞–¥—ã.\n\n"
    "–ö–æ–º–∞–Ω–¥–∞–ª–∞—Ä:\n"
    "/queue ‚Äî –∫–µ–∑–µ–∫—Ç—ñ –∫”©—Ä—É\n"
    "/mystats ‚Äî –º–µ–Ω—ñ“£ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞–º\n"
)
MSG_USTAZ_NOT_REGISTERED = "–°—ñ–∑ —É—Å—Ç–∞–∑ —Ä–µ—Ç—ñ–Ω–¥–µ —Ç—ñ—Ä–∫–µ–ª–º–µ–≥–µ–Ω—Å—ñ–∑. ”ò–∫—ñ–º—à—ñ–≥–µ —Ö–∞–±–∞—Ä–ª–∞—Å—ã“£—ã–∑."
MSG_USTAZ_QUEUE_EMPTY = "–ö–µ–∑–µ–∫—Ç–µ —Å“±—Ä–∞“õ—Ç–∞—Ä –∂–æ“õ."
MSG_USTAZ_QUESTION_TAKEN = "–°“±—Ä–∞“õ “õ–∞–±—ã–ª–¥–∞–Ω–¥—ã. –ñ–∞—É–∞–±—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑:"
MSG_USTAZ_QUESTION_ALREADY_TAKEN = "–ë“±–ª —Å“±—Ä–∞“õ—Ç—ã –±–∞—Å“õ–∞ —É—Å—Ç–∞–∑ –∞–ª–¥—ã."
MSG_USTAZ_ANSWER_SENT = "–ñ–∞—É–∞–±—ã“£—ã–∑ –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã“ì–∞ –∂—ñ–±–µ—Ä—ñ–ª–¥—ñ!"
MSG_USTAZ_HAS_ACTIVE = "–°—ñ–∑–¥–µ –∞—è“õ—Ç–∞–ª–º–∞“ì–∞–Ω —Å“±—Ä–∞“õ –±–∞—Ä. –ê–ª–¥—ã–º–µ–Ω –æ“ì–∞–Ω –∂–∞—É–∞–ø –±–µ—Ä—ñ“£—ñ–∑."
MSG_USTAZ_NEW_QUESTION = (
    "–ñ–∞“£–∞ —Å“±—Ä–∞“õ –∫–µ–ª–¥—ñ!\n\n"
    "–ü–∞–π–¥–∞–ª–∞–Ω—É—à—ã: {user_name}\n"
    "–°“±—Ä–∞“õ: {question}\n\n"
    "/queue ‚Äî –∫–µ–∑–µ–∫—Ç—ñ –∫”©—Ä—É"
)
